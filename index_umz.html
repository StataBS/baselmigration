<!DOCTYPE html>
<html lang=en>
<head>
  <meta charset=utf-8>
	<title>Umzüge Innerhalb des Kantons Basel-Stadt</title>
	<meta name=description content="Umzüge Innerhalb des Kantons Basel-Stadt">
	<meta name=viewport content="width=device-width, initial-scale=1.0">
	<link rel="icon" href="favicon.png" type="image/png">
	<link href="dist/app-v1.css" rel="stylesheet" media="all">

	<!--[if lt IE 9]><script src=javascripts/html5shiv-printshiv.js></script><![endif]-->
  <script src="dist/app-v1.js"></script>
</head>
<body>

  <div id=container class="container">
	<header role="banner">
  		<h1>Umzüge Innerhalb des Kantons Basel-Stadt</h1>
      <div class="lead-in">
        Interaktive Visualisierung der innerhalb des<br/>
		Kantons Basel-Stadt umgezogenen Personen.
	  </div>
      <div class="credits">
        von Christa Moll Freddi &amp; Jonas Bieri, <a href="http://statistik.bs.ch">Statistisches Amt Basel-Stadt</a>
      </div>
      <hr>
  	</header>

  	<div class="wrap">
  		<main role="main">
        <nav role=navigation>
          <div id="timeline"></div>
        </nav>
        <div id="diagram"></div>
  		</main>
  	</div>


  	<footer>
		<small>
			Idee <a href="http://nikolasander.com/" target="_blank">Dr. Nikola Sander</a>, Programmierung <a href="http://null2.net/" target="_blank">Null2.net</a>, Initiale Umsetzung <a href="http://www.global-migration.info/" target="_blank">The Global Flow of People</a>, Source Code <a href="https://github.com/jb3-2/globalmigration" target="_blank">github.com</a>,
			Lizenz <a href="http://creativecommons.org/licenses/by-nc/3.0/" target="_blank">CC BY-NC 3.0</a>, Quelle: Kantonale Bevölkerungsstatistik BS, <a href="embed_umz_code.html" target="blank">Einbetten</a>
		</small>
	</footer>



    <div id=help-wrapper class=help-wrapper>
      <div class="help" id="help">
        <div class="tab">Anleitung</div>
        <div class="help-content">
          <h3>Anleitung</h3>
          <img src="images/help.png" class="left">
          <p>
			Herkunft und Ziel des Umzugs sind durch Kreissegmente repräsentiert.
			Jedes Wohnviertel und jeder Bezirk innerhalb eines Wohnviertels erhält eine Farbe zugewiesen.
			Umzüge zwischen Kreissegmenten erhalten die Farbe der Wegzugsregion, die Breite der Bänder ist proportional zur Anzahl Umzüge zwischen den Segmenten.
			Die Richtung des Umzugs ist neben der Farbe auch durch den Abstand des Streifens zum Kreissegment angezeigt: kleiner Abstand zum Startsegment, grosser Abstand zum Zielsegment.
            <b>Segmente sind anklickbar, dadurch werden sie geöffnet und geschlossen.</b>
          </p>
          <div class="clear"></div>
          <p>
			Für den Wechsel zwischen den zu analysierenden Jahren können auch die Tasten 1 bis 9 verwendet werden.
			Zurückführen der Graphik in ihren Ursprungszustand druch Ctrl und R, Zoom durch Ctrl und + bzw. Ctrl und -.
          </p>

        </div>
        <div class="clear"></div>
      </div>
    </div>
  </div>

  <script>
    // help
    (function() {
      var help = d3.select('#help');

      help.on('click', function() {
        var isActive = help.classed('active');

        help
          .classed('active', !isActive)
          .transition()
          .style('width', isActive ? '30px' : '572px');
      });

      function helpOffset() {
        var offset = Math.max((document.body.clientWidth - document.getElementById('container').clientWidth) / 2, 0);

        help.style('right', offset + 'px');
      }
      d3.select(window).on('resize.help-resize', helpOffset);
      helpOffset();
    })();
  </script>


  <script>
    (function() {

      var datafile = 'json/migrationsStatA_UmzAlle.json';
      var aLittleBit = Math.PI / 100000;

      d3.json(datafile, function(data) {
        var now = 2015;
        var chart = Globalmigration.chart(data, {
          element: '#diagram',
          now: now,
          animationDuration: 500,
          margin: 125,
          arcPadding: 0.018,
          InFlowLabel: 'Eingezogene',
          OutFlowLabel: 'Ausgezogene',
          layout: {
            threshold: 1,
            labelThreshold: 1,
			//colors: '73B97C 68AB2B 007A2F 0A3B19 FFBB58 FF8028 DC440E B00000 661200 B6CFD7 D3E2E4 A8C3CA 689199 246370 083038 ECE1D0 C4AB91 9E7C59 67401E 3A2012 D7E8D2 '.split(' ').map(function(c) { return '#' + c; })
			colors: 'cd3d08 ec8f00 6dae29 683f92 b60275 2058a5 00a592 009d3c 378974 ffca00'.split(' ').map(function(c) { return '#' + c; })
          }
        });

        Globalmigration.timeline(chart, {
          now: now,
          element: '#timeline'
        });

        chart.draw(now);
      });
    })();

  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-64466408-1', 'auto');
    ga('send', 'pageview');

  </script>

</body>
</html>
